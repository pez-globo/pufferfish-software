Scenario: SFM3019 Device:: SFM3019 device behaves correctly when start_measure function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and O2 as gas parameter') 
    WHEN('The start_measure method is called ') 
      THEN('The start_measure method returns ok status') 
      THEN('The mock I2C's write buffer consists of start measure O2 command byte '0x3603'') 
      THEN('The mock  I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'x01'initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device global I2C device and air as gas parameter') 
    WHEN('The start_measure method is called ') 
      THEN('The start_measure method returns ok status') 
      THEN('The mock I2C's write buffer consists of start measure air command byte '0x3608'') 
      THEN('The mock I2C's read buffer is empty ') 
      THEN('The global_device I2C's read buffer is empty ') 
      THEN('The global_device I2C's write buffer consists'x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device global I2C device and mixture as gas parameter') 
    WHEN('The start_measure method is called ') 
      THEN('The start_measure method returns ok status') 
      THEN('The mock I2C's write buffer consists of start measure mixture command byte '0x3632'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'0x01' initially given') 

Scenario: SFM3019 Device:: SFM3019 device behaves correctly when stop_measure function is called
  GIVEN('A SFM3019 device constructed with a mock I2C device global I2C device and O2 as gas parameter ') 
    WHEN('The stop_measure method is called ') 
      THEN('The stop_measure method returns ok status') 
      THEN('The mock I2C's write buffer consists of stop measure O2 command byte '0x3FF9'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'0x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device global I2C device and air as gas parameter ') 
    WHEN('The stop_measure method is called ') 
      THEN('The stop_measure method returns ok status') 
      THEN('The mock I2C's write buffer consists of stop measure air command byte '0x3FF9'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'0x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device global I2C device and mixture as gas parameter ') 
    WHEN('The stop_measure method is called ') 
      THEN('The stop_measure returns ok') 
      THEN('The mock I2C's write buffer consists of stop measure mixture command byte '0x3FF9'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'0x01' initially given') 

Scenario: SFM3019 Device:: SFM3019 device behaves correctly when set_averaging function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device global I2c device  and O2 as gas parameter') 
    WHEN('The averaging_window 0 is passed as input parameter') 
      THEN('The set_averaging method returns ok status') 
      THEN('The mock I2C's write buffer consists of set_averaging command byte '0x366A' followed by '0x000081'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given ') 

    WHEN('The averaging_window 128 is passed as input parameter') 
      THEN('The set_averaging method returns ok status') 
      THEN('The mock I2C's write buffer consists of set_averaging  command byte '0x366A' followed by '0x0080FB'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'0x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device global I2c device  and air as gas parameter') 
    WHEN('The averaging_window 0 is passed as input parameter') 
      THEN('The set_averaging method returns ok status') 
      THEN('The mock I2C's write buffer consists of set_averaging  command byte '0x366A' followed by '0x000081'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

    WHEN('The averaging_window 128 is passed as input parameter') 
      THEN('The set_averaging method returns ok status') 
      THEN('The mock I2C's write buffer consists of set_averaging  command byte '0x366A' followed by '0x0080FB'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device global I2c device  and mixture as gas parameter') 
    WHEN('The averaging_window 0 is passed as input parameter') 
      THEN('The set_averaging method returns ok status') 
      THEN('The mock I2C's write buffer consists of set_averaging  command byte '0x366A' followed by '0x000081'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

    WHEN('The averaging_window 128 is passed as input parameter') 
      THEN('The set_averaging method returns ok status') 
      THEN('The mock I2C's write buffer consists of set_averaging  command byte '0x366A' followed by '0x0080FB') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given ') 

Scenario: SFM3019 Device:: SFM3019 device behaves correctly when request_conversion_factors function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device , global I2C device and gas parameter') 
    WHEN('The request_conversion_factors method is called with gas type O2 as input parameter') 
      THEN('The request_conversion_factors method returns ok status') 
      THEN('The mock I2C's write buffer consists of request_conversion_factor O2 command byte '0x3661 followed by '0x36033A'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given ') 

    WHEN('The request_conversion_factors method is called with  gas type air as input parameter') 
      THEN('The request_conversion_factors method returns ok status') 
      THEN('The mock I2C's write buffer consists of request_conversion_factor air command byte '0x3661 followed by '0x3608D0'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'0x01' initially given') 

    WHEN(
        'The request_conversion_factors method is called with gas type mixture as input parameter') 
      THEN('The request_conversion_factors returns ok') 
      THEN('The mock I2C's write buffer consists of request_conversion_factor mixture command byte '0x3661 followed by '0x3632CE'') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'x01'initally given') 

Scenario: SFM3019 Device:: SFM3019 device behaves correctly when read_conversion_factors function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and air as gas parameter') 
    WHEN('The read_conversion_factors method is called with scale factor 10, offset -5 as input parameter and a default-initialized ConversionFactors '
        'object as the output parameter where mock I2C's read buffer consists 0x[78,33,1B,4c,00,bc,00,00,81]') 
      THEN('The read_conversion_factors return ok status') 
      THEN('The output parameter scale factor is 10')
      THEN('The output parameter offset is -5')
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

    WHEN('The read_conversion_factors method is called with scale factor 170, offset -24576 as input parameter and a default-initialized ConversionFactors '
        'object as the output parameter where mock I2C's read buffer consists 0x[78,33,1B,4c,00,bc,00,00,81]s') 
      THEN('Command data overwrites previous data') 
      THEN('The output parameter scale factor is 170')
      THEN('The output parameter offset is -24576')
      THEN('The mock_device I2C's write buffer consists '0x01' initally given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

Scenario: SFM3019 Device:: SFM3019 device behaves correctly when read_product_id function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and gas parameter') 
    WHEN('Product id 0x04020611 is passed as an input parameter') 
      THEN('The read_product_id method returns ok status') 
      THEN('The mock_device I2C's write buffer consists '0xE102' ')
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'x01' initially given') 

Scenario: SFM3019 Device:: SFM3019 device behaves correctly when read_sample function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and gas parameter') 
    WHEN('The read_sample method is called with  scale factor of 170 and an offset of  -24576  as input parameters, and a Sample object '
        'initialized to default as the output parameter, where mock I2C's read buffer is set to 0x[ae, dc, 6a]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns -20772')
      THEN('Output parameter flow returns 22.37647F ') 
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

    WHEN('The read_sample method is called with  scale factor of 170 and an offset of -14576 as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[ae, dc, 6a]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns -20772')
      THEN('Output parameter flow returns -36.44706F')
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

    WHEN('The read_sample method is called with  scale factor of 170 and an offset of -100 as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[ae, dc, 6a]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns -20772')
      THEN('Output parameter flow returns -121.6F') 
      THEN('The mock_device I2C's write buffer consists '0x01'initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01'initially given') 

    WHEN('The read_sample method is called with  scale factor of 100 and an offset of -24576  as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[ae, dc, 6a]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns -20772')
      THEN('Output parameter flow returns 38.04F') 
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

    WHEN('The read_sample method is called with  scale factor of 50 and an offset of  -24576  as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[ae, dc, 6a]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns -20772')
      THEN('Output parameter flow returns 76.08F') 
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' given initially') 

    WHEN('The read_sample method is called with  scale factor of 200 and an offset of  -24576  as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[ae, dc, 6a]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns -20772')
      THEN('Output parameter flow returns 19.02F ') 
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and gas parameter') 
    WHEN('The read_sample method is called with  scale factor of 170 and an offset of  -24576  as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[15, 35, a8]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns 5429')
      THEN('Output parameter flow returns 176.5F ') 
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 

  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and gas parameter') 
    WHEN('The read_sample method is called with  scale factor of 170 and an offset of  -24576  as input parameters, and a Sample object '
        'initialized to default as the output parameter where mock I2C's read buffer is set to 0x[74, 6f, ac]') 
      THEN('The read_sample function returns ok status') 
      THEN('Output parameter raw_flow returns 29807')
      THEN('Output parameter flow returns 319.89999F ') 
      THEN('The mock_device I2C's write buffer consists '0x01' initially given') 
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists '0x01' initially given') 


Scenario: SFM3019 Device:: SFM3019 device behaves correctly when reset function is called 
  GIVEN('A SFM3019 device constructed with a mock I2C device, global I2C device and gas parameter') 
    WHEN('The reset method is called') 
      THEN('The reset function returns ok') 
      THEN('The mock_device I2C's write buffer consists 'x01' initally given')
      THEN('The mock_device I2C's read buffer is empty') 
      THEN('The global_device I2C's read buffer is empty') 
      THEN('The global_device I2C's write buffer consists'x06'') 
